(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{13:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__voq4c",SearchForm:"Searchbar_SearchForm__3TCvk",SearchFormButton:"Searchbar_SearchFormButton__VB074",SearchFormInput:"Searchbar_SearchFormInput__15nlU"}},20:function(e,t,a){},21:function(e,t,a){e.exports={homePageUrl:"HomeLink_homePageUrl__3jFSp",homeIcon:"HomeLink_homeIcon__2x9Ux"}},22:function(e,t,a){e.exports={Overlay:"Modal_Overlay__3T5pv",Modal:"Modal_Modal__1HU7s"}},33:function(e,t,a){e.exports={loaderBox:"Spiner_loaderBox__3IQcV"}},34:function(e,t,a){e.exports={loadMoreButton:"Button_loadMoreButton__rd3_m"}},36:function(e,t,a){e.exports={btnToTop:"BtnToTop_btnToTop__yMWCX","hide-el":"BtnToTop_hide-el__1nBa5"}},42:function(e,t,a){},45:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(11),o=a.n(c),s=(a(42),a(43),a(4)),i=a(5),l=a(7),u=a(6),h=a(17),d=(a(44),a(45),a(16)),m=a(13),p=a.n(m),g=a(2),b=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={searchQuery:""},e.inputRef=n.a.createRef(),e.handleInputChange=function(t){return e.setState({searchQuery:t.currentTarget.value})},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.searchQuery.trim()?(e.props.searchQueryToUp(e.state.searchQuery),e.inputRef.current.placeholder=e.state.searchQuery,e.setState({searchQuery:""})):h.b.warn("\u0412\u0432\u0435\u0434\u0438 \u0447\u0442\u043e-\u0442\u043e!",{autoClose:2e3,theme:"colored",icon:!1})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.searchQuery,t=this.handleInputChange,a=this.handleSubmit;return Object(g.jsx)("div",{className:p.a.Searchbar,children:Object(g.jsxs)("form",{className:p.a.SearchForm,onSubmit:a,children:[Object(g.jsx)("button",{type:"submit",className:p.a.SearchFormButton,children:Object(g.jsx)(d.b,{})}),Object(g.jsx)("label",{children:Object(g.jsx)("input",{className:p.a.SearchFormInput,type:"text",name:"searchInput",ref:this.inputRef,placeholder:"search",value:e,onChange:t,pattern:"^[0-9a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u041f\u043e\u0438\u0441\u043a\u043e\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435, \u0446\u0438\u0444\u0440 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432."})})]})})}}]),a}(r.Component),j=b,f=a(10),y=a.n(f),v=a(18),O=a(12),I=a(9),x=a.n(I),_=a(31),w=a.n(_),k=function(){function e(){Object(s.a)(this,e),this.searchQuery="",this.KEY="22984321-98218ca8e9b1f3be57a008ac4&q",this.BASE_URL="https://pixabay.com/api/",this.page=1,this.orientation="all",this.imgType="all"}return Object(i.a)(e,[{key:"fetchImages",value:function(){var e=Object(O.a)(y.a.mark((function e(t,a){var r,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.searchQuery=t,this.page=a,r="".concat(this.BASE_URL,"?image_type=").concat(this.imgType,"&orientation=").concat(this.orientation,"&page=").concat(this.page,"&per_page=12&key=").concat(this.KEY,"&q=").concat(this.searchQuery),e.next=5,w.a.get(r);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),S=new k,M=a(20),C=a.n(M),T=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.arr,a=t.webformatURL,r=t.tags,n=t.largeImageURL,c=t.id;return Object(g.jsx)("a",{href:n,id:c,className:C.a.ImageGalleryItemLink,onClick:function(t){return t.preventDefault(),e.props.imgIdToUp(t.currentTarget.id)},children:Object(g.jsx)("img",{src:a,alt:r,className:C.a.ImageGalleryItemImage})})}}]),a}(r.Component),Q=T,U=a(21),A=a.n(U),L=function(e){var t=e.arr.pageURL;return Object(g.jsx)("a",{href:t,className:A.a.homePageUrl,target:"_blank",rel:"noreferrer",children:Object(g.jsx)(d.a,{className:A.a.homeIcon})})},N=a(32),R=a.n(N),B=a(33),E=a.n(B),F=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(g.jsx)("div",{className:E.a.loaderBox,children:Object(g.jsx)(R.a,{type:"Circles",color:"#617a53",height:160,width:160,timeout:5e3})})}}]),a}(r.Component),G=F,D=a(34),q=a.n(D),P=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).clickButton=e.props.buttonClick,e}return Object(i.a)(a,[{key:"render",value:function(){return Object(g.jsx)("button",{type:"button",className:q.a.loadMoreButton,onClick:this.clickButton,children:"Load more"})}}]),a}(r.Component),H=P,W=a(22),K=a.n(W),Y=document.querySelector("#modal-root"),z=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).closeModal=function(t){t.target===t.currentTarget&&e.props.closeModalClick(!0)},e.handleKeyDown=function(t){"Escape"===t.code&&e.props.closeModalEsc(),("ArrowRight"===t.code||"ArrowLeft"===t.code)&&e.props.changeImg(t.code)},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.closeModal;return Object(c.createPortal)(Object(g.jsx)("div",{className:K.a.Overlay,onClick:e,children:Object(g.jsx)("div",{className:K.a.Modal,children:this.props.children})}),Y)}}]),a}(r.Component),J=z;function Z(e,t){var a=t.findIndex((function(t){return t.id===Number.parseInt(e)}));return{largeImageURL:t[a].largeImageURL,tags:t[a].tags,imgId:t[a].id}}function V(e,t,a){var r="";return("ArrowRight"===e||e>=window.innerWidth/2)&&(r="right"),("ArrowLeft"===e||e<window.innerWidth/2)&&(r="left"),function(e,t,a){var r=a.findIndex((function(e){return e.id===t})),n=0;return{largeImageURL:a[n="right"===e?r===a.length-1?0:r+1:0===r?a.length-1:r-1].largeImageURL,tags:a[n].tags,imgId:a[n].id}}(r,t,a)}var X=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:null,imgObjArr:[],page:1,totalImg:0,status:"idle",showModal:!1,largeImageURL:"",tags:"",imgId:0},e.loadMore=Object(O.a)(y.a.mark((function t(){var a,r,n,c,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state,r=a.searchQuery,n=a.page,r!==e.props.searchQuery){t.next=16;break}return o=n+1,t.prev=3,t.next=6,S.fetchImages(r,o);case 6:c=t.sent,t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(3),console.log("Error: request failed"),t.abrupt("return",e.setState({status:"failed"}));case 13:e.setState((function(t){var a=t.imgObjArr[t.imgObjArr.length-1].id;return e.scrollPoint=window.scrollY+Math.floor(document.querySelector('[id="'.concat(a,'"]')).getBoundingClientRect().bottom)-32,{imgObjArr:[].concat(Object(v.a)(t.imgObjArr),Object(v.a)(c.data.hits)),page:o,totalImg:c.data.totalHits}})),setTimeout(e.scrollFoo,300);case 16:case 17:case"end":return t.stop()}}),t,null,[[3,9]])}))),e.scrollPoint=0,e.scrollFoo=function(){window.scrollTo({top:e.scrollPoint,behavior:"smooth"})},e.closeModalClick=function(t){t&&e.toggleModal()},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.openModal=function(t){var a=Z(t,e.state.imgObjArr),r=a.largeImageURL,n=a.tags,c=a.imgId;e.setState((function(e){return{showModal:!e.showModal,imgId:c,largeImageURL:r,tags:n}}))},e.moveImg=function(t){var a=V(t,e.state.imgId,e.state.imgObjArr),r=a.largeImageURL,n=a.tags,c=a.imgId;e.setState({imgId:c,largeImageURL:r,tags:n})},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(){var e=Object(O.a)(y.a.mark((function e(t,a){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.searchQuery===this.props.searchQuery){e.next=16;break}return this.setState({status:"pending"}),e.prev=2,e.next=5,S.fetchImages(this.props.searchQuery,1);case 5:r=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log("Error: request failed"),e.abrupt("return",this.setState({status:"failed"}));case 12:if(0!==r.data.totalHits){e.next=15;break}return e.abrupt("return",this.setState({status:"rejected"}));case 15:this.setState({searchQuery:this.props.searchQuery,imgObjArr:Object(v.a)(r.data.hits),page:1,totalImg:r.data.totalHits,status:"resolved"});case 16:case 17:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.searchQuery,a=e.imgObjArr,r=e.status,n=e.totalImg,c=e.showModal,o=e.largeImageURL,s=e.tags,i=e.page,l=this.openModal,u=this.loadMore,h=this.closeModalClick,d=this.toggleModal,m=this.moveImg;return"idle"===r?Object(g.jsx)("h2",{className:x.a.galleryTitle,children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441"}):"pending"===r?Object(g.jsx)(G,{}):"rejected"===r?Object(g.jsxs)("h2",{className:x.a.galleryTitle,children:['\u041f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 "',this.props.searchQuery.toUpperCase(),'" \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e']}):"failed"===r?Object(g.jsx)("h2",{className:x.a.galleryTitle,children:"Error: request failed. \u041d\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u043e\u043c \u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c"}):"resolved"===r?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:x.a.galleryContainer,id:"events",children:[Object(g.jsxs)("h2",{className:x.a.galleryTitle,children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e ",n,' \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 "',t.toUpperCase(),'":']}),Object(g.jsx)("ul",{className:x.a.ImageGallery,children:a.map((function(e){var t=e.id;return Object(g.jsxs)("li",{className:x.a.ImageGalleryItem,children:[Object(g.jsx)(Q,{arr:e,imgIdToUp:l}),Object(g.jsx)(L,{arr:e})]},t)}))}),12*i<n&&Object(g.jsx)(H,{buttonClick:u}),12*i>=n&&Object(g.jsxs)("h2",{className:x.a.galleryTitle,children:['\u0417\u0430\u043f\u0440\u043e\u0441 "',t.toUpperCase(),'" \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d']})]}),c&&Object(g.jsx)(J,{closeModalClick:h,closeModalEsc:d,changeImg:m,children:Object(g.jsx)("img",{src:o,alt:s,className:x.a.modalImg,onClick:function(e){return m(e.clientX)}})})]}):void 0}}]),a}(r.Component),$=X,ee=a(35),te=a(37),ae=a(36),re=a.n(ae),ne=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={status:"hide"},e.toTop=function(){window.scrollTo({top:0,behavior:"smooth"})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("scroll",Object(ee.a)(500,(function(t){return e.scrollWatch()})))}},{key:"scrollWatch",value:function(){window.scrollY>140?this.setState({status:"visible"}):this.setState({status:"hide"})}},{key:"render",value:function(){var e=this.state.status;return"hide"===e?Object(g.jsx)(g.Fragment,{}):"visible"===e?Object(g.jsx)("button",{type:"button",className:re.a.btnToTop,onClick:this.toTop,children:Object(g.jsx)(te.a,{})}):void 0}}]),a}(r.Component),ce=ne,oe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:""},e.searchQuerySubmit=function(t){return e.setState({searchQuery:t})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.searchQuery,t=this.searchQuerySubmit;return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(j,{searchQueryToUp:t}),Object(g.jsx)($,{searchQuery:e}),Object(g.jsx)(h.a,{}),Object(g.jsx)(ce,{})]})}}]),a}(r.Component),se=oe;o.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(se,{})}),document.getElementById("root")),console.log("\u041f\u0440\u0438\u0432\u0456\u0442, \u0441\u0432\u0456\u0442! \u0416\u0438\u0442\u0442\u044f \u0445\u0438\u043c\u0435\u0440\u043d\u0435!")},9:function(e,t,a){e.exports={galleryContainer:"ImageGallery_galleryContainer__pmDat",ImageGallery:"ImageGallery_ImageGallery__2jGtM",ImageGalleryItem:"ImageGallery_ImageGalleryItem__3AdI-",galleryTitle:"ImageGallery_galleryTitle__1SRlB",modalImg:"ImageGallery_modalImg__3EQJ3"}}},[[86,1,2]]]);
//# sourceMappingURL=main.f1609025.chunk.js.map